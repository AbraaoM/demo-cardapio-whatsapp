<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Finalizar pedido">
  <title>Finalizar Pedido - CardÃ¡pio Digital</title>
  <link rel="stylesheet" href="css/styles.css">
</head>
<body>
  <!-- Header -->
  <header class="header">
    <h1>âœ… Finalizar Pedido</h1>
    <p>Informe seus dados para concluir</p>
  </header>

  <!-- Container Principal -->
  <main class="container">
    <!-- Total do Pedido -->
    <div class="total-section">
      <div class="total-row">
        <span class="total-label">Total do Pedido:</span>
        <span id="checkout-total" class="total-value">R$ 0,00</span>
      </div>
    </div>

    <!-- FormulÃ¡rio de Checkout -->
    <form id="checkout-form" class="checkout-form">
      <!-- Telefone -->
      <div class="form-section">
        <h3>ğŸ“ Telefone para Contato</h3>
        <div class="form-group">
          <label for="phone">NÃºmero de WhatsApp *</label>
          <input 
            type="tel" 
            id="phone" 
            name="phone" 
            placeholder="(11) 99999-9999"
            required
            pattern="[\(\d\)\s\-]+"
          >
        </div>
      </div>

      <!-- Tipo de Entrega -->
      <div class="form-section">
        <h3>ğŸšš Tipo de Entrega</h3>
        <div class="radio-group">
          <div class="radio-option">
            <input 
              type="radio" 
              id="delivery" 
              name="delivery-type" 
              value="delivery"
              checked
              onchange="toggleAddressSection(this)"
            >
            <label for="delivery">ğŸ  Delivery - Entregar no endereÃ§o</label>
          </div>
          <div class="radio-option">
            <input 
              type="radio" 
              id="pickup" 
              name="delivery-type" 
              value="pickup"
              onchange="toggleAddressSection(this)"
            >
            <label for="pickup">ğŸª Retirada - Buscar no local</label>
          </div>
        </div>
      </div>

      <!-- EndereÃ§o de Entrega -->
      <div id="delivery-address-section" class="form-section">
        <h3>ğŸ“ EndereÃ§o de Entrega</h3>
        
        <div class="form-group">
          <label for="street">Rua *</label>
          <input 
            type="text" 
            id="street" 
            name="street" 
            placeholder="Nome da rua"
            required
          >
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="number">NÃºmero *</label>
            <input 
              type="text" 
              id="number" 
              name="number" 
              placeholder="NÃºmero"
              required
            >
          </div>
        </div>

        <div class="form-group">
          <label for="neighborhood">Bairro *</label>
          <input 
            type="text" 
            id="neighborhood" 
            name="neighborhood" 
            placeholder="Nome do bairro"
            required
          >
        </div>

        <div class="form-group">
          <label for="complement">Complemento</label>
          <input 
            type="text" 
            id="complement" 
            name="complement" 
            placeholder="Apartamento, bloco, etc. (opcional)"
          >
        </div>
      </div>

      <!-- EndereÃ§o de Retirada -->
      <div id="pickup-address-section" class="form-section">
        <h3>ğŸ“ EndereÃ§o para Retirada</h3>
        <div class="pickup-address-box">
          <h4>Retire seu pedido em:</h4>
          <p class="pickup-address"></p>
        </div>
      </div>

      <!-- BotÃµes de AÃ§Ã£o -->
      <div class="action-buttons">
        <button type="button" onclick="window.location.href='review.html'" class="btn btn-secondary">
          â† Voltar
        </button>
        <button type="submit" class="btn btn-primary">
          Finalizar Pedido ğŸ“±
        </button>
      </div>
    </form>
  </main>

  <!-- Scripts -->
  <script src="js/data.js"></script>
  <script src="js/storage.js"></script>
  <script src="js/cart.js"></script>
  <script src="js/whatsapp.js"></script>
  <script src="js/ui.js"></script>
  
  <script>
    // FunÃ§Ã£o para alternar seÃ§Ã£o de endereÃ§o
    function toggleAddressSection(radio) {
      const deliverySection = document.getElementById('delivery-address-section');
      const pickupSection = document.getElementById('pickup-address-section');
      
      if (radio.value === 'delivery') {
        deliverySection.classList.add('active');
        pickupSection.classList.remove('active');
      } else {
        deliverySection.classList.remove('active');
        pickupSection.classList.add('active');
      }
    }

    // Inicializa o carrinho
    Cart.init();
    
    // Inicializa a pÃ¡gina de checkout
    UI.initCheckout();
    
    // Mostra a seÃ§Ã£o correta ao carregar
    toggleAddressSection(document.querySelector('input[name="delivery-type"]:checked'));
    
    // Event listener para o formulÃ¡rio
    document.getElementById('checkout-form').addEventListener('submit', (e) => {
      UI.handleCheckoutSubmit(e);
    });
  </script>
</body>
</html>
